<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UserDAO">

	<insert id="insertPs">
			INSERT INTO account (id,password) VALUES (#{id},#{password});
			INSERT INTO member VALUES ((SELECT MAX(mno) FROM account),#{name},#{phone},#{birth},#{address},#{email});
	</insert>
	<insert id="insertBusiness">
			INSERT INTO account (id,password) VALUES (#{id},#{password})
			INSERT INTO business VALUES ((SELECT MAX(mno) FROM account),#{name},#{address},#{phone},#{email},#{comment},#{time},#{typeNum})
			
			INSERT INTO bsn_account VALUES ((SELECT MAX(mno) FROM account),#{bankNum},#{accountNum})
			<!-- INSERT INTO bsn_payment((SELECT MAX(mno) FROM account),#{paymentTypeNum}) 보류-->
			 
	</insert>
	<update id="updatePerson">
			UPDATE BOARD SET 
			<if test="password !=null OR password !=''">
			password=#{password},
			</if>
			mname=#{name}, phone=#{phone},
			birth=#{birth}, address=#{address},
			email=#{email} 
			WHERE mno=#{no}
	</update>
	<update id="updateBusiness">
		
	</update>
	<delete id="deleteUser">
			DELETE account WHERE mno=#{no}		
	</delete>
	
	<select id="getPerson">
			SELECT ac.mno as no, id, password, mname as name, phone, birth, address, email FROM account ac, member mb
			WHERE ac.mno=mb.mno 
			AND ac.mno=#{no}
	</select>
	<select id="getBusiness">
	</select>
	
	<!-- 관리자 페이지 기능이기 때문에 일단 대기.. -->
	<select id="getUserList">
		
	</select>
</mapper>